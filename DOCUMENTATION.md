# Documentation Setup

This document describes the documentation system for `@stats/core`.

## Overview

The documentation is built using:

- **[VitePress](https://vitepress.dev/)** - Modern, fast documentation site generator
- **[TypeDoc](https://typedoc.org/)** - Auto-generates API reference from TypeScript
- **Markdown** - All guides and examples are written in markdown

## Quick Start

### 1. Install Dependencies

```bash
cd docs
npm install
```

### 2. Run Development Server

```bash
npm run dev
```

Visit `http://localhost:5173` to see the documentation.

### 3. Build Documentation

```bash
npm run build
```

This generates:
- API reference from TypeScript (using TypeDoc)
- Static site (using VitePress)

## Structure

```
docs/
├── .vitepress/              # VitePress configuration
│   ├── config.js            # Site configuration
│   └── theme/               # Custom theme
├── guide/                   # User guides
│   ├── index.md             # Introduction
│   ├── installation.md      # Installation guide
│   ├── quick-start.md       # Quick start guide
│   ├── initialization.md    # Initialization guide
│   ├── performance.md      # Performance guide
│   └── browser-support.md  # Browser support
├── examples/                # Code examples
│   ├── basic-statistics.md
│   ├── distributions.md
│   ├── correlation.md
│   ├── quantiles.md
│   └── statistical-tests.md
├── api/                     # Auto-generated API reference
│   └── (generated by TypeDoc)
├── scripts/                 # Documentation scripts
│   ├── generate-examples.js
│   └── extract-examples.js
├── typedoc.json             # TypeDoc configuration
└── package.json             # Documentation dependencies
```

## Auto-Generation

### API Reference

The API reference is automatically generated from TypeScript source code:

```bash
npm run docs:api
```

This runs TypeDoc on `js/package/src/index.ts` and generates markdown files in `docs/api/`.

**To update API docs:**
1. Add/update JSDoc comments in `js/package/src/index.ts`
2. Run `npm run docs:api`
3. Commit the generated files

### Example Extraction

Scripts are available to extract examples from source code (future enhancement):

- `scripts/extract-examples.js` - Extracts `@example` blocks from JSDoc
- `scripts/generate-examples.js` - Generates markdown from example files

## Writing Documentation

### Adding a New Guide

1. Create a new `.md` file in `docs/guide/`
2. Add frontmatter:
   ```markdown
   ---
   # Optional frontmatter
   ---
   ```
3. Update `docs/.vitepress/config.js` sidebar configuration

### Adding Examples

1. Create a new `.md` file in `docs/examples/`
2. Include code blocks with proper syntax highlighting:
   ```markdown
   ```js
   import { init, mean } from '@stats/core';
   await init();
   const result = mean([1, 2, 3]);
   ```
   ```
3. Update sidebar configuration

### Enhancing JSDoc Comments

Add comprehensive JSDoc comments to TypeScript functions:

```typescript
/**
 * Calculate the mean of an array.
 * 
 * @param data - Array of numbers
 * @returns The mean value, or NaN if array is empty
 * 
 * @example
 * ```js
 * import { init, mean } from '@stats/core';
 * await init();
 * 
 * const scores = [85, 90, 78, 92, 88];
 * const average = mean(scores); // 86.6
 * ```
 */
export function mean(data: ArrayLike<number>): number {
  // ...
}
```

## Best Practices

1. **Always include examples** - Every function should have at least one example
2. **Use real-world scenarios** - Examples should be practical and relatable
3. **Keep examples runnable** - All code examples should work when copied
4. **Update API docs** - Regenerate API reference after changing TypeScript
5. **Test locally** - Always preview documentation before committing

## Deployment

The documentation can be deployed to:

- **GitHub Pages** - Automatic deployment via GitHub Actions
- **Netlify** - Connect to repository for automatic builds
- **Vercel** - Deploy with `npm run build`

### GitHub Pages Example

```yaml
# .github/workflows/docs.yml
name: Deploy Docs
on:
  push:
    branches: [main]
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: cd docs && npm install && npm run build
      - uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./docs/.vitepress/dist
```

## Maintenance

### Regular Tasks

1. **Update dependencies** - Keep VitePress and TypeDoc updated
2. **Regenerate API** - After each release, regenerate API docs
3. **Review examples** - Ensure examples still work with latest API
4. **Check links** - Verify all internal and external links work

### Versioning

Documentation should match the library version. Update version in:
- `docs/.vitepress/config.js` (if displayed)
- `docs/typedoc.json` (for API reference)

## Resources

- [VitePress Documentation](https://vitepress.dev/)
- [TypeDoc Documentation](https://typedoc.org/)
- [Markdown Guide](https://www.markdownguide.org/)







