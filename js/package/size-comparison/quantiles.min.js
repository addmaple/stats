import{simd as w}from"wasm-feature-detect";function s(n,o,r){return new Float64Array(r.buffer,n,o)}function f(n,o){if(n instanceof Float64Array)o.set(n);else if(n instanceof Array)o.set(n);else{let r=n.length;if(r>0&&typeof n[0]=="number")try{o.set(n)}catch{for(let e=0;e<r;e++)o[e]=n[e]}else for(let e=0;e<n.length;e++)o[e]=n[e]}}function a(n,o){let r=s(n.ptr,n.len,o),e=new Float64Array(n.len);return e.set(r),e}async function p(n){let o=await w();return await import(n)}var t=null;async function d(){if(t)return;t=await p("../../../crates/stat-wasm-quantiles/pkg/stat_wasm_quantiles.js")}function x(n,o,r=!1){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let e=n.length;if(e===0)return NaN;let i=t.alloc_f64(e),l=s(i,e,t.get_memory());f(n,l);let c=t.percentile_f64(i,e,o,r);return t.free_f64(i,e),c}function W(n,o){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let r=n.length;if(r===0)return NaN;let e=t.alloc_f64(r),i=s(e,r,t.get_memory());f(n,i);let l=t.percentile_inclusive_f64(e,r,o);return t.free_f64(e,r),l}function N(n,o){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let r=n.length;if(r===0)return NaN;let e=t.alloc_f64(r),i=s(e,r,t.get_memory());f(n,i);let l=t.percentile_exclusive_f64(e,r,o);return t.free_f64(e,r),l}function q(n,o,r=!1){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let e=n.length;if(e===0)return NaN;let i=t.alloc_f64(e),l=s(i,e,t.get_memory());f(n,l);let c=t.percentile_of_score_f64(i,e,o,r);return t.free_f64(i,e),c}function A(n){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let o=n.length;if(o===0)return{q1:NaN,q2:NaN,q3:NaN};let r=t.alloc_f64(o),e=s(r,o,t.get_memory());f(n,e);let i=t.quartiles_f64(r,o);return t.free_f64(r,o),i}function E(n){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let o=n.length;if(o===0)return NaN;let r=t.alloc_f64(o),e=s(r,o,t.get_memory());f(n,e);let i=t.iqr_f64(r,o);return t.free_f64(r,o),i}function z(n,o){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let r=n.length,e=o.length;if(r===0||e===0)return new Float64Array;let i=t.alloc_f64(r),l=t.alloc_f64(e),c=s(i,r,t.get_memory()),m=s(l,e,t.get_memory());f(n,c),f(o,m);let u=t.quantiles_f64(i,r,l,e),_=a(u,t.get_memory());return t.free_f64(i,r),t.free_f64(l,e),t.free_f64(u.ptr,u.len),_}function C(n,o){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let r=n.length;if(r===0)return new Float64Array;let e=t.alloc_f64(r),i=s(e,r,t.get_memory());f(n,i);let l=t.histogram_f64(e,r,o),c=a(l,t.get_memory());return t.free_f64(e,r),t.free_f64(l.ptr,l.len),c}function v(n,o){if(!t)throw new Error("Wasm module not initialized. Call init() first.");let r=n.length,e=o.length;if(r===0||e===0)return new Float64Array;let i=t.alloc_f64(r),l=t.alloc_f64(e),c=s(i,r,t.get_memory()),m=s(l,e,t.get_memory());f(n,c),f(o,m);let u=t.histogram_edges_f64(i,r,l,e),_=a(u,t.get_memory());return t.free_f64(i,r),t.free_f64(l,e),t.free_f64(u.ptr,u.len),_}export{C as histogram,v as histogramEdges,d as init,E as iqr,x as percentile,N as percentileExclusive,W as percentileInclusive,q as percentileOfScore,z as quantiles,A as quartiles};
